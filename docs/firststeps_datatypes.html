<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
  <title>How R You?: First steps</title>

  <meta property="description" itemprop="description" content="Data types"/>



  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="How R You?: First steps"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Data types"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:site_name" content="How R You?"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="How R You?: First steps"/>
  <meta property="twitter:description" content="Data types"/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","toc","toc_float","site"]}},"value":[{"type":"character","attributes":{},"value":["First steps"]},{"type":"character","attributes":{},"value":["Data types\n"]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["distill::distill_website"]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  <!--radix_placeholder_navigation_in_header-->
  <meta name="distill:offset" content=""/>

  <script type="application/javascript">

    window.headroom_prevent_pin = false;

    window.document.addEventListener("DOMContentLoaded", function (event) {

      // initialize headroom for banner
      var header = $('header').get(0);
      var headerHeight = header.offsetHeight;
      var headroom = new Headroom(header, {
        tolerance: 5,
        onPin : function() {
          if (window.headroom_prevent_pin) {
            window.headroom_prevent_pin = false;
            headroom.unpin();
          }
        }
      });
      headroom.init();
      if(window.location.hash)
        headroom.unpin();
      $(header).addClass('headroom--transition');

      // offset scroll location for banner on hash change
      // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
      window.addEventListener("hashchange", function(event) {
        window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
      });

      // responsive menu
      $('.distill-site-header').each(function(i, val) {
        var topnav = $(this);
        var toggle = topnav.find('.nav-toggle');
        toggle.on('click', function() {
          topnav.toggleClass('responsive');
        });
      });

      // nav dropdowns
      $('.nav-dropbtn').click(function(e) {
        $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
        $(this).parent().siblings('.nav-dropdown')
           .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $("body").click(function(e){
        $('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $(".nav-dropdown").click(function(e){
        e.stopPropagation();
      });
    });
  </script>

  <style type="text/css">

  /* Theme (user-documented overrideables for nav appearance) */

  .distill-site-nav {
    color: rgba(255, 255, 255, 0.8);
    background-color: #0F2E3D;
    font-size: 15px;
    font-weight: 300;
  }

  .distill-site-nav a {
    color: inherit;
    text-decoration: none;
  }

  .distill-site-nav a:hover {
    color: white;
  }

  @media print {
    .distill-site-nav {
      display: none;
    }
  }

  .distill-site-header {

  }

  .distill-site-footer {

  }


  /* Site Header */

  .distill-site-header {
    width: 100%;
    box-sizing: border-box;
    z-index: 3;
  }

  .distill-site-header .nav-left {
    display: inline-block;
    margin-left: 8px;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header .nav-left {
      margin-left: 0;
    }
  }


  .distill-site-header .nav-right {
    float: right;
    margin-right: 8px;
  }

  .distill-site-header a,
  .distill-site-header .title {
    display: inline-block;
    text-align: center;
    padding: 14px 10px 14px 10px;
  }

  .distill-site-header .title {
    font-size: 18px;
    min-width: 150px;
  }

  .distill-site-header .logo {
    padding: 0;
  }

  .distill-site-header .logo img {
    display: none;
    max-height: 20px;
    width: auto;
    margin-bottom: -4px;
  }

  .distill-site-header .nav-image img {
    max-height: 18px;
    width: auto;
    display: inline-block;
    margin-bottom: -3px;
  }



  @media screen and (min-width: 1000px) {
    .distill-site-header .logo img {
      display: inline-block;
    }
    .distill-site-header .nav-left {
      margin-left: 20px;
    }
    .distill-site-header .nav-right {
      margin-right: 20px;
    }
    .distill-site-header .title {
      padding-left: 12px;
    }
  }


  .distill-site-header .nav-toggle {
    display: none;
  }

  .nav-dropdown {
    display: inline-block;
    position: relative;
  }

  .nav-dropdown .nav-dropbtn {
    border: none;
    outline: none;
    color: rgba(255, 255, 255, 0.8);
    padding: 16px 10px;
    background-color: transparent;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    margin: 0;
    margin-top: 1px;
    z-index: 2;
  }

  .nav-dropdown-content {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 200px;
    border: 1px solid rgba(0,0,0,0.15);
    border-radius: 4px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
    z-index: 1;
    margin-top: 2px;
    white-space: nowrap;
    padding-top: 4px;
    padding-bottom: 4px;
  }

  .nav-dropdown-content hr {
    margin-top: 4px;
    margin-bottom: 4px;
    border: none;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .nav-dropdown-active {
    display: block;
  }

  .nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
    color: black;
    padding: 6px 24px;
    text-decoration: none;
    display: block;
    text-align: left;
  }

  .nav-dropdown-content .nav-dropdown-header {
    display: block;
    padding: 5px 24px;
    padding-bottom: 0;
    text-transform: uppercase;
    font-size: 14px;
    color: #999999;
    white-space: nowrap;
  }

  .nav-dropdown:hover .nav-dropbtn {
    color: white;
  }

  .nav-dropdown-content a:hover {
    background-color: #ddd;
    color: black;
  }

  .nav-right .nav-dropdown-content {
    margin-left: -45%;
    right: 0;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
    .distill-site-header a.nav-toggle {
      float: right;
      display: block;
    }
    .distill-site-header .title {
      margin-left: 0;
    }
    .distill-site-header .nav-right {
      margin-right: 0;
    }
    .distill-site-header {
      overflow: hidden;
    }
    .nav-right .nav-dropdown-content {
      margin-left: 0;
    }
  }


  @media screen and (max-width: 768px) {
    .distill-site-header.responsive {position: relative; min-height: 500px; }
    .distill-site-header.responsive a.nav-toggle {
      position: absolute;
      right: 0;
      top: 0;
    }
    .distill-site-header.responsive a,
    .distill-site-header.responsive .nav-dropdown {
      display: block;
      text-align: left;
    }
    .distill-site-header.responsive .nav-left,
    .distill-site-header.responsive .nav-right {
      width: 100%;
    }
    .distill-site-header.responsive .nav-dropdown {float: none;}
    .distill-site-header.responsive .nav-dropdown-content {position: relative;}
    .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
      display: block;
      width: 100%;
      text-align: left;
    }
  }

  /* Site Footer */

  .distill-site-footer {
    width: 100%;
    overflow: hidden;
    box-sizing: border-box;
    z-index: 3;
    margin-top: 30px;
    padding-top: 30px;
    padding-bottom: 30px;
    text-align: center;
  }

  /* Headroom */

  d-title {
    padding-top: 6rem;
  }

  @media print {
    d-title {
      padding-top: 4rem;
    }
  }

  .headroom {
    z-index: 1000;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
  }

  .headroom--transition {
    transition: all .4s ease-in-out;
  }

  .headroom--unpinned {
    top: -100px;
  }

  .headroom--pinned {
    top: 0;
  }

  /* adjust viewport for navbar height */
  /* helps vertically center bootstrap (non-distill) content */
  .min-vh-100 {
    min-height: calc(100vh - 100px) !important;
  }

  </style>

  <script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
  <link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
  <script src="site_libs/headroom-0.9.4/headroom.min.js"></script>
  <script src="site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
  <script src="site_libs/fuse-6.4.1/fuse.min.js"></script>

  <script type="application/javascript">

  function getMeta(metaName) {
    var metas = document.getElementsByTagName('meta');
    for (let i = 0; i < metas.length; i++) {
      if (metas[i].getAttribute('name') === metaName) {
        return metas[i].getAttribute('content');
      }
    }
    return '';
  }

  function offsetURL(url) {
    var offset = getMeta('distill:offset');
    return offset ? offset + '/' + url : url;
  }

  function createFuseIndex() {

    // create fuse index
    var options = {
      keys: [
        { name: 'title', weight: 20 },
        { name: 'categories', weight: 15 },
        { name: 'description', weight: 10 },
        { name: 'contents', weight: 5 },
      ],
      ignoreLocation: true,
      threshold: 0
    };
    var fuse = new window.Fuse([], options);

    // fetch the main search.json
    return fetch(offsetURL('search.json'))
      .then(function(response) {
        if (response.status == 200) {
          return response.json().then(function(json) {
            // index main articles
            json.articles.forEach(function(article) {
              fuse.add(article);
            });
            // download collections and index their articles
            return Promise.all(json.collections.map(function(collection) {
              return fetch(offsetURL(collection)).then(function(response) {
                if (response.status === 200) {
                  return response.json().then(function(articles) {
                    articles.forEach(function(article) {
                      fuse.add(article);
                    });
                  })
                } else {
                  return Promise.reject(
                    new Error('Unexpected status from search index request: ' +
                              response.status)
                  );
                }
              });
            })).then(function() {
              return fuse;
            });
          });

        } else {
          return Promise.reject(
            new Error('Unexpected status from search index request: ' +
                        response.status)
          );
        }
      });
  }

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // get search element (bail if we don't have one)
    var searchEl = window.document.getElementById('distill-search');
    if (!searchEl)
      return;

    createFuseIndex()
      .then(function(fuse) {

        // make search box visible
        searchEl.classList.remove('hidden');

        // initialize autocomplete
        var options = {
          autoselect: true,
          hint: false,
          minLength: 2,
        };
        window.autocomplete(searchEl, options, [{
          source: function(query, callback) {
            const searchOptions = {
              isCaseSensitive: false,
              shouldSort: true,
              minMatchCharLength: 2,
              limit: 10,
            };
            var results = fuse.search(query, searchOptions);
            callback(results
              .map(function(result) { return result.item; })
            );
          },
          templates: {
            suggestion: function(suggestion) {
              var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
                ? `<img src="${offsetURL(suggestion.preview)}"</img>`
                : '';
              var html = `
                <div class="search-item">
                  <h3>${suggestion.title}</h3>
                  <div class="search-item-description">
                    ${suggestion.description || ''}
                  </div>
                  <div class="search-item-preview">
                    ${img}
                  </div>
                </div>
              `;
              return html;
            }
          }
        }]).on('autocomplete:selected', function(event, suggestion) {
          window.location.href = offsetURL(suggestion.path);
        });
        // remove inline display style on autocompleter (we want to
        // manage responsive display via css)
        $('.algolia-autocomplete').css("display", "");
      })
      .catch(function(error) {
        console.log(error);
      });

  });

  </script>

  <style type="text/css">

  .nav-search {
    font-size: x-small;
  }

  /* Algolioa Autocomplete */

  .algolia-autocomplete {
    display: inline-block;
    margin-left: 10px;
    vertical-align: sub;
    background-color: white;
    color: black;
    padding: 6px;
    padding-top: 8px;
    padding-bottom: 0;
    border-radius: 6px;
    border: 1px #0F2E3D solid;
    width: 180px;
  }


  @media screen and (max-width: 768px) {
    .distill-site-nav .algolia-autocomplete {
      display: none;
      visibility: hidden;
    }
    .distill-site-nav.responsive .algolia-autocomplete {
      display: inline-block;
      visibility: visible;
    }
    .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
      margin-left: 0;
      width: 400px;
      max-height: 400px;
    }
  }

  .algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
    width: 90%;
    outline: none;
    border: none;
  }

  .algolia-autocomplete .aa-hint {
    color: #999;
  }
  .algolia-autocomplete .aa-dropdown-menu {
    width: 550px;
    max-height: 70vh;
    overflow-x: visible;
    overflow-y: scroll;
    padding: 5px;
    margin-top: 3px;
    margin-left: -150px;
    background-color: #fff;
    border-radius: 5px;
    border: 1px solid #999;
    border-top: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
    cursor: pointer;
    padding: 5px 4px;
    border-bottom: 1px solid #eee;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
    border-bottom: none;
    margin-bottom: 2px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
    overflow: hidden;
    font-size: 0.8em;
    line-height: 1.4em;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
    font-size: 1rem;
    margin-block-start: 0;
    margin-block-end: 5px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
    display: inline-block;
    overflow: hidden;
    height: 2.8em;
    width: 80%;
    margin-right: 4%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
    display: inline-block;
    width: 15%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
    height: 3em;
    width: auto;
    display: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
    display: initial;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
    background-color: #eee;
  }
  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
    font-weight: bold;
    font-style: normal;
  }

  </style>


  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        if ($(this).children()[0].nodeName == "D-FOOTNOTE") {
          var fn = $(this).children()[0]
          $(this).html(fn.shadowRoot.querySelector("sup"))
          $(this).id = fn.id
          fn.remove()
        }
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          return "<p>" + $('#ref-' + ref).html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // fix footnotes in tables (#411)
      // replacing broken distill.pub feature
      $('table d-footnote').each(function() {
        // we replace internal showAtNode methode which is triggered when hovering a footnote
        this.hoverBox.showAtNode = function(node) {
          // ported from https://github.com/distillpub/template/pull/105/files
          calcOffset = function(elem) {
              let x = elem.offsetLeft;
              let y = elem.offsetTop;
              // Traverse upwards until an `absolute` element is found or `elem`
              // becomes null.
              while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                  x += elem.offsetLeft;
                  y += elem.offsetTop;
              }

              return { left: x, top: y };
          }
          // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
          const bbox = node.getBoundingClientRect();
          const offset = calcOffset(node);
          this.show([offset.left + bbox.width, offset.top + bbox.height]);
        }
      })

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      // ignore leaflet img layers (#106)
      figures = figures.filter(':not(img[class*="leaflet"])')
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
  <script src="site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"First steps","description":"Data types","authors":[]}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="index.html" class="title">How R You?</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="index.html">Home</a>
<div class="nav-dropdown">
<button class="nav-dropbtn">
First steps
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="firststeps_intro.html">One big calculator</a>
<a href="firststeps_functions.html">Functions</a>
<a href="firststeps_datatypes.html">Data types</a>
<a href="firststeps_preparations.html">Preparations</a>
<a href="firststeps_writing.html">Writing code</a>
<a href="firststeps_reproduce.html">Reproducibility</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Wrangling
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="wrangling_datasets.html">Data sets</a>
<a href="wrangling_import.html">Importing data</a>
<a href="wrangling_export.html">Exporting data</a>
<a href="wrangling_explore.html">Exploring data</a>
<a href="wrangling_manipulate.html">Manipulating data</a>
<a href="wrangling_simulation.html">Simulation</a>
<a href="wrangling_imputation.html">Imputation</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Visualization
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="viz_grammar.html">ggplot2 grammar</a>
<a href="viz_types.html">Types / overview</a>
<a href="viz_customization.html">Customization</a>
<a href="viz_advanced.html">Advanced plotting</a>
<a href="viz_tables.html">Tables</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Analysis
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="analysis_basics_par.html">Basics: Parametric</a>
<a href="analysis_basics_nonpar.html">Basics: Non-Parametric</a>
<a href="analysis_regression.html">Regression stories</a>
<a href="analysis_mlm.html">Multilevel modelling</a>
<a href="analysis_explore.html">Exploratory analysis</a>
<a href="analysis_sem.html">SEM</a>
<a href="analysis_power.html">Power</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Programming
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="programming_ifelse.html">If/else</a>
<a href="programming_loops.html">Loops</a>
<a href="programming_functions.html">Functions</a>
<a href="programming_git.html">Version control</a>
</div>
</div>
<a href="activities.html">Activities</a>
<a href="about.html">About</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>First steps</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Data types</p></p>
</div>


<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>

</nav>
</div>
<div class="layout-chunk" data-layout="l-body">

</div>
<h1 id="vectors">Vectors</h1>
<p>In R the name for a variable that can store multiple values is a
vector. So let’s create one.</p>
<h2 id="character-vectors">Character vectors</h2>
<p>Pretend we’re designing a survey, and we want to keep track of the
responses that a participant has given. This time, let’s imagine that
we’ve finished running the survey and we’re examining the data. Suppose
we’ve administered the Depression, Anxiety and Stress Scale (DASS) and
as a consequence every participant has scores for on the depression,
anxiety and stress scales provided by the DASS. One thing we might want
to do is create a single variable called scale_name that identifies the
three scales. The simplest way to do this in R is to use the combine
function, c.16 To do so, all we have to do is type the values we want to
store in a comma separated list, like this</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>scale_name</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"depression"</span>,<span class='st'>"anxpiety"</span>,<span class='st'>"stress"</span><span class='op'>)</span>
<span class='va'>scale_name</span>
</code></pre>
</div>
<pre><code>[1] &quot;depression&quot; &quot;anxpiety&quot;   &quot;stress&quot;    </code></pre>
</div>
<p>To use the correct terminology here, we have a single variable here
called <code>scale_name</code>: this variable is a vector that has three
elements. Because the vector contains text, it is a character vector.
You can use the length function to check the <code>length</code>, and
the <code>class</code> function to check what kind of vector it is:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>scale_name</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 3</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>scale_name</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;character&quot;</code></pre>
</div>
<h2 id="numeric-vectors">Numeric vectors</h2>
<p>As you might expect, we can define numeric or logical variables in
the same way. For instance, we could define the raw scores on the three
DASS scales like so:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>raw_score</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>12</span>, <span class='fl'>3</span>, <span class='fl'>8</span><span class='op'>)</span>
<span class='va'>raw_score</span>
</code></pre>
</div>
<pre><code>[1] 12  3  8</code></pre>
</div>
<p>We’ll talk about logical vectors in a bit.</p>
<h2 id="extracting-an-element">Extracting an element</h2>
<p>If I want to extract the first element from the vector, all I have to
do is refer to the relevant numerical index, using square brackets to do
so. For example, to get the first element of scale_name I would type
this</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>scale_name</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1] &quot;depression&quot;</code></pre>
</div>
<p>The second element of the vector is</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>scale_name</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1] &quot;anxpiety&quot;</code></pre>
</div>
<p>You get the idea…</p>
<h2 id="extracting-multiple-elements">Extracting multiple elements</h2>
<p>There are a few ways to extract multiple elements of a vector. The
first way is to specify a vector that contains the indices of the
variables that you want to keep. To extract the first two scale
names:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>scale_name</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1] &quot;depression&quot; &quot;anxpiety&quot;  </code></pre>
</div>
<p>Alternatively, R provides a convenient shorthand notation in which
1:2 is a vector containing the numbers from 1 to 2, and similarly 1:10
is a vector containing the numbers from 1 to 10. So this is also the
same:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>scale_name</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1] &quot;depression&quot; &quot;anxpiety&quot;  </code></pre>
</div>
<p>Notice that order matters here. So if I do this</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>scale_name</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1] &quot;anxpiety&quot;   &quot;depression&quot;</code></pre>
</div>
<p>I get the same numbers, but in the reverse order.</p>
<h2 id="removing-elements">Removing elements</h2>
<p>Finally, when working with vectors, R allows us to use negative
numbers to indicate which elements to remove. So this is yet another way
of doing the same thing:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>scale_name</span><span class='op'>[</span><span class='op'>-</span><span class='fl'>3</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1] &quot;depression&quot; &quot;anxpiety&quot;  </code></pre>
</div>
<p>Notice that done of this has changed the original variable. The
scale_name itself has remained completely untouched.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>scale_name</span>
</code></pre>
</div>
<pre><code>[1] &quot;depression&quot; &quot;anxpiety&quot;   &quot;stress&quot;    </code></pre>
</div>
<h2 id="editing-vectors">Editing vectors</h2>
<p>Sometimes you’ll want to change the values stored in a vector.
Imagine my surprise if someone pointed out to me that “anxiety” is not
in fact a real thing. I should probably fix that! One possibility would
be to assign the whole vector again from the beginning, using c. But
that’s a lot of typing. Also, it’s a little wasteful: why should R have
to redefine the names for all three scales, when only the second one is
wrong? Fortunately, we can tell R to change only the second element,
using this trick:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>scale_name</span><span class='op'>[</span><span class='fl'>2</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"anxiety"</span>
<span class='va'>scale_name</span>
</code></pre>
</div>
<pre><code>[1] &quot;depression&quot; &quot;anxiety&quot;    &quot;stress&quot;    </code></pre>
</div>
<p>That’s better.</p>
<h2 id="naming-elements">Naming elements</h2>
<p>One very handy thing in R is that it lets you assign meaningful names
to the different elements in a vector. For example, the
<code>raw_scores</code> vector that we introduced earlier contains the
actual data from a study but when you print it out on its own</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>raw_score</span>
</code></pre>
</div>
<pre><code>[1] 12  3  8</code></pre>
</div>
<p>its not obvious what each of the scores corresponds to. There are
several different ways of making this a little more meaningful (and
we’ll talk about them later) but for now I want to show one simple
trick. Ideally, what we’d like to do is have R remember that the first
element of the raw_score is the “depression” score, the second is
“anxiety” and the third is “stress”. We can do that like this:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>raw_score</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>scale_name</span>
</code></pre>
</div>
</div>
<p>This is a bit of an unusual looking assignment statement. Usually,
whenever we use <code>&lt;-</code> the thing on the left hand side is
the variable itself (i.e., <code>raw_score</code>) but this time around
the left hand side refers to the names. To see what this command has
done, let’s get R to print out the <code>raw_score</code> variable
now:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>raw_score</span>
</code></pre>
</div>
<pre><code>depression    anxiety     stress 
        12          3          8 </code></pre>
</div>
<p>That’s a little nicer. Element names don’t just look nice, they’re
functional too. You can refer to the elements of a vector using their
names, like so:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>raw_score</span><span class='op'>[</span><span class='st'>"anxiety"</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>anxiety 
      3 </code></pre>
</div>
<h2 id="vector-operations">Vector operations</h2>
<p>One really nice thing about vectors is that a lot of R functions and
operators will work on the whole vector at once. For instance, suppose I
want to normalize the raw scores from the DASS. Each scale of the DASS
is constructed from 14 questions that are rated on a 0-3 scale, so the
minimum possible score is 0 and the maximum is 42. Suppose I wanted to
re-scale the raw scores to lie on a scale from 0 to 1. I can create the
<code>scaled_score</code> variable like this:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>scaled_score</span> <span class='op'>&lt;-</span> <span class='va'>raw_score</span> <span class='op'>/</span> <span class='fl'>42</span>
<span class='va'>scaled_score</span>
</code></pre>
</div>
<pre><code>depression    anxiety     stress 
0.28571429 0.07142857 0.19047619 </code></pre>
</div>
<p>In other words, when you divide a vector by a single number, all
elements in the vector get divided. The same is true for addition,
subtraction, multiplication and taking powers. So that’s neat.</p>
<p>Suppose it later turned out that I’d made a mistake. I hadn’t in fact
administered the complete DASS, only the first page. As noted in the
DASS website, it’s possible to fix this mistake (sort of). First, I have
to recognize that my scores are actually out of 21 not 42, so the
calculation I should have done is this:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>scaled_score</span> <span class='op'>&lt;-</span> <span class='va'>raw_score</span> <span class='op'>/</span> <span class='fl'>21</span>
<span class='va'>scaled_score</span>
</code></pre>
</div>
<pre><code>depression    anxiety     stress 
 0.5714286  0.1428571  0.3809524 </code></pre>
</div>
<p>Then, it turns out that page 1 of the full DASS is almost the same as
the short form of the DASS, but there’s a correction factor you have to
apply. The depression score needs to be multiplied by 1.04645, the
anxiety score by 1.02284, and stress by 0.98617</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>correction_factor</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1.04645</span>, <span class='fl'>1.02284</span>, <span class='fl'>0.98617</span><span class='op'>)</span>
<span class='va'>corrected_score</span> <span class='op'>&lt;-</span> <span class='va'>scaled_score</span> <span class='op'>*</span> <span class='va'>correction_factor</span>
<span class='va'>corrected_score</span>
</code></pre>
</div>
<pre><code>depression    anxiety     stress 
 0.5979714  0.1461200  0.3756838 </code></pre>
</div>
<p>What this has done is multiply the first element of
<code>scaled_score</code> by the first element of
<code>correction_factor</code>, multiply the second element of
scaled_score by the second element of <code>correction_factor</code>,
and so on.</p>
<p>I’ll talk more about calculations involving vectors later, because
they come up a lot. In particular R has a thing called the recycling
rule that is worth knowing about. But that’s enough detail for now.</p>
<h2 id="logical-vectors">Logical vectors</h2>
<p>I mentioned earlier that we can define vectors of logical values in
the same way that we can store vectors of numbers and vectors of text,
again using the c function to combine multiple values. Logical vectors
can be useful as data in their own right, but the thing that they’re
especially useful for is extracting elements of another vector, which is
referred to as logical indexing.</p>
<p>Here’s a simple example. Suppose I decide that the stress scale is
not very useful for my study, and I only want to keep the first two
elements, depression and anxiety. One way to do this is to define a
logical vector that indicates which values to keep:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>keep</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>TRUE</span>, <span class='cn'>TRUE</span>, <span class='cn'>FALSE</span><span class='op'>)</span> 
<span class='va'>keep</span>
</code></pre>
</div>
<pre><code>[1]  TRUE  TRUE FALSE</code></pre>
</div>
<p>In this instance the keep vector indicates that it is TRUE that I
want to retain the first two elements, and FALSE that I want to keep the
third. So if I type this</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>corrected_score</span><span class='op'>[</span><span class='va'>keep</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>depression    anxiety 
 0.5979714  0.1461200 </code></pre>
</div>
<p>R prints out the corrected scores for the two variables only. As
usual, note that this hasn’t changed the original variable. If I print
out the original vector…</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>corrected_score</span>
</code></pre>
</div>
<pre><code>depression    anxiety     stress 
 0.5979714  0.1461200  0.3756838 </code></pre>
</div>
<p>… all three values are still there. If I do want to create a new
variable, I need to explicitly assign the results of my previous command
to a variable.</p>
<p>Let’s suppose that I want to call the new variable
<code>short_score</code>, indicating that I’ve only retained some of the
scales. Here’s how I do that:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>short_score</span> <span class='op'>&lt;-</span> <span class='va'>corrected_score</span><span class='op'>[</span><span class='va'>keep</span><span class='op'>]</span>
<span class='va'>short_score</span>
</code></pre>
</div>
<pre><code>depression    anxiety 
 0.5979714  0.1461200 </code></pre>
</div>
<h2 id="comment">Comment</h2>
<p>At this point, I hope you can see why logical indexing is such a
useful thing. It’s a very basic, yet very powerful way to manipulate
data. For instance, I might want to extract the scores of the adult
participants in a study, which would probably involve a command like
<code>scores[age &gt; 18]</code>. The operation <code>age &gt; 18</code>
would return a vector of <code>TRUE</code> and <code>FALSE</code>
values, and so the the full command <code>scores[age &gt; 18]</code>
would return only the scores for participants with
<code>age &gt; 18</code>. It does take practice to become completely
comfortable using logical indexing, so it’s a good idea to play around
with these sorts of commands. Practice makes perfect, and it’s only by
practicing logical indexing that you’ll perfect the art of cursing your
computer.</p>
<h1 id="factors">Factors</h1>
<p>Research methodology classes are at pains to point out: data we
analyze come in different kinds! Some variables are inherently
quantitative in nature: response time (RT) for instance, has a natural
interpretation in units of time. So when I define a response time
variable, I use a numeric vector. To keep my variable names concise,
I’ll define the same variable again using the conventional RT
abbreviation:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>RT</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>420</span>, <span class='fl'>619</span>, <span class='fl'>550</span>, <span class='fl'>521</span>, <span class='fl'>1003</span>, <span class='fl'>486</span>, <span class='fl'>512</span>, <span class='fl'>560</span>, <span class='fl'>495</span>, <span class='fl'>610</span><span class='op'>)</span>
<span class='va'>RT</span>
</code></pre>
</div>
<pre><code> [1]  420  619  550  521 1003  486  512  560  495  610</code></pre>
</div>
<p>A response time of 1500 milliseconds is indeed 400 milliseconds
slower than a response time of 1100 milliseconds, so addition and
subtraction are meaningful operations. Similarly, 1500 milliseconds is
twice as long as 750 milliseconds, so multiplication and division are
also meaningful. That’s not the case for other kinds of data, and this
is where factors can be useful…</p>
<h2 id="unordered-factors">Unordered factors</h2>
<p>Some variables are inherently nominal in nature. If I recruit
participants in an online experiment I might see that their place of
residence falls in one of several different regions. For simplicity,
let’s imagine we ran a study on MTurk designed to sample people from one
of four distinct geographical regions: the United States, India, China
or the European Union, which I’ll represent using the codes “us”, “in”,
“ch” and “eu”. My first thought would be to represent the data using a
character vector:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>region_raw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"us"</span>,<span class='st'>"us"</span>,<span class='st'>"us"</span>,<span class='st'>"eu"</span>,<span class='st'>"in"</span>,<span class='st'>"eu"</span>,<span class='st'>"in"</span>,<span class='st'>"in"</span>,<span class='st'>"us"</span>,<span class='st'>"in"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>This seems quite reasonable, but there’s a problem: as it happens
there is nobody from China in this sample. So if I try to construct a
frequency table of these data – which I can do using the table()
function in R – the answer I get omits China entirely:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>region_raw</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>region_raw
eu in us 
 2  4  4 </code></pre>
</div>
<p>Intuitively it feels like there should be a fourth entry here,
indicating that we have 0 participants from China. R has a natural tool
for representing this idea, called a factor. First, we’ll create a new
variable using the <code>factor()</code> function that contains the same
information but represents it as a factor:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>region</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>region_raw</span><span class='op'>)</span>
<span class='va'>region</span>
</code></pre>
</div>
<pre><code> [1] us us us eu in eu in in us in
Levels: eu in us</code></pre>
</div>
<p>This looks much the same, and not surprisingly R still doesn’t know
anything about the possibility of participants from China. However,
notice that the bottom of the output lists the levels of the factor. The
levels of a factor specify the set of values that variable could have
taken. By default, <code>factor()</code> tries to guess the levels using
the raw data, but we can override that manually, like this:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>region</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>region_raw</span>, levels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ch"</span>,<span class='st'>"eu"</span>,<span class='st'>"in"</span>,<span class='st'>"us"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>region</span>
</code></pre>
</div>
<pre><code> [1] us us us eu in eu in in us in
Levels: ch eu in us</code></pre>
</div>
<p>Now when we tabulate the region variable, we obtain the right
answer:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>region</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>region
ch eu in us 
 0  2  4  4 </code></pre>
</div>
<p>Much better.</p>
<h2 id="ordered-factors">Ordered factors</h2>
<p>There are two different types of factor in R. Until now we have been
discussing un-ordered factors, in which the categories are purely
nominal and there is no notion that the categories are arranged in any
particular order. However, many psychologically important variables are
inherently ordinal. Questionnaire responses often take this form, where
participants might be asked to endorse a proposition using verbal
categories such as “strongly agree”, “agree”, “neutral”, “disagree” and
“strongly disagree”. The five response categories can’t be given any
sensible numerical values but they can be ordered in a sensible fashion.
In this situation we may want to represent the responses as an ordered
factor.</p>
<p>To give you a sense of how these work in R, suppose we’ve been
unfortunate enough to be given a data set that encodes ordinal responses
numerically. Let’s suppose the original survey asked people how strongly
they supported a politicial policy. Here we have a variable consisting
of Likert-scale data, where (let’s suppose) in the original
questionnaire 1 = “strongly agree” and 7 = “strongly disagree”,</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>support_raw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>7</span>, <span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>4</span>, <span class='fl'>4</span>, <span class='fl'>2</span>, <span class='fl'>6</span>, <span class='fl'>5</span>, <span class='fl'>5</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>We can convert this to an ordered factor by specifying
<code>ordered = TRUE</code> when we call the <code>factor()</code>
function, like so:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>support</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span> 
  x <span class='op'>=</span> <span class='va'>support_raw</span>,            <span class='co'># the raw data</span>
  levels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>7</span>,<span class='fl'>6</span>,<span class='fl'>5</span>,<span class='fl'>4</span>,<span class='fl'>3</span>,<span class='fl'>2</span>,<span class='fl'>1</span><span class='op'>)</span>,  <span class='co'># strongest agreement is 1, weakest is 7</span>
  ordered <span class='op'>=</span> <span class='cn'>TRUE</span>              <span class='co'># and it’s ordered</span>
<span class='op'>)</span>
<span class='va'>support</span>
</code></pre>
</div>
<pre><code> [1] 1 7 3 4 4 4 2 6 5 5
Levels: 7 &lt; 6 &lt; 5 &lt; 4 &lt; 3 &lt; 2 &lt; 1</code></pre>
</div>
<p>Notice that when we print out the ordered factor, R explicitly tells
us what order the levels come in.</p>
<p>Because I wanted to order my levels in terms of increasing strength
of endorsement, and because a response of 1 corresponded to the
strongest agreement and 7 to the strongest disagreement, it was
important that I tell R to encode 7 as the lowest value and 1 as the
largest. Always check this when creating an ordered factor: it’s very
easy to accidentally encode your data with the levels reversed if you’re
not paying attention. In any case, note that we can (and should) attach
meaningful names to these factor levels by using the levels function,
like this:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>support</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span> 
  <span class='st'>"strong disagree"</span>, <span class='st'>"disagree"</span>, <span class='st'>"weak disagree"</span>,
  <span class='st'>"neutral"</span>, <span class='st'>"weak agree"</span>, <span class='st'>"agree"</span>, <span class='st'>"strong agree"</span> 
<span class='op'>)</span>
<span class='va'>support</span>
</code></pre>
</div>
<pre><code> [1] strong agree    strong disagree weak agree      neutral        
 [5] neutral         neutral         agree           disagree       
 [9] weak disagree   weak disagree  
7 Levels: strong disagree &lt; disagree &lt; weak disagree &lt; ... &lt; strong agree</code></pre>
</div>
<p>A nice thing about ordered factors is that some analyses in R
automatically treat ordered factors differently to un-ordered factors,
and generally in a way that is more appropriate for ordinal data.</p>
<h1 id="data-frames-tibbles">Data frames / tibbles</h1>
<p>We now have three variables that we might plausibly have encountered
as the result of some study, region, support and RT.20 At the moment, R
has no understanding of how these variables are related to each other.
Quite likely they’re ordered the same way, so that the data stored in
<code>region[1]</code>, <code>support[1]</code> and <code>RT[1]</code>
all come from the same person. That would be sensible, but R is a robot
and does not possess common sense. To help a poor little robot out (and
to make our own lives easier), it’s nice to organize these three
variable into a tabular format. This is where data frames – and the
tidyverse analog tibbles – are very useful.</p>
<h2 id="making-a-data-frame">Making a data frame</h2>
<p>So how do we create a data frame (or tibble)? One way: if we import
our data from a CSV file, R will create one for you. A second method is
to create a data frame directly from some existing variables using the
<code>data.frame</code> function. In real world data analysis this
method is less common, but it’s very helpful for understanding what a
data frame actually is, so that’s what we’ll do in this section.</p>
<p>Manually constructing a data frame is simple. All you have to do when
calling <code>data.frame</code> is type a list of variables that you
want to include in the data frame. If I want to store the variables from
my experiment in a data frame called dat I can do so like this:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>support</span>, <span class='va'>RT</span><span class='op'>)</span>
<span class='va'>dat</span>
</code></pre>
</div>
<pre><code>   region         support   RT
1      us    strong agree  420
2      us strong disagree  619
3      us      weak agree  550
4      eu         neutral  521
5      in         neutral 1003
6      eu         neutral  486
7      in           agree  512
8      in        disagree  560
9      us   weak disagree  495
10     in   weak disagree  610</code></pre>
</div>
<p>Note that <code>dat</code> is a self-contained variable. Once
created, it no longer depends on the variables from which it was
constructed. If we make changes to the original <code>RT</code>
variable, these will not influence the copy in <code>dat</code> (or vice
versa). So for the sake of my sanity I’m going to remove all the
originals:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span><span class='va'>region_raw</span>, <span class='va'>region</span>, <span class='va'>support_raw</span>, <span class='va'>support</span>, <span class='va'>RT</span><span class='op'>)</span>  
</code></pre>
</div>
</div>
<p>As you can see, our workspace has only a single variable, a data
frame called <code>dat</code>.</p>
<p>In this example I constructed the data frame manually so that you can
see how a data frame is built from a set of variables, but in most real
life situations you’d probably load your data frame directly from a CSV
file or similar.</p>
<h2 id="making-a-tibble">Making a tibble</h2>
<p>Constructing a tibble from raw variables is essentially the same as
constructing a data frame, and the function we use to do this is
<code>tibble</code>. If I hadn’t deleted all the raw variables in the
previous section, this command would work:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tib</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>support</span>, <span class='va'>RT</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Alas they are gone, and I will have to try a different method.
Fortunately, I can <code>coerce</code> my existing data frame
<code>dat</code> into a <code>tibble</code> using the
<code>as_tibble()</code> function, and use it to create a tibble called
<code>tib</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tib</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>)</span>
<span class='va'>tib</span>
</code></pre>
</div>
<pre><code># A tibble: 10 × 3
   region support            RT
   &lt;fct&gt;  &lt;ord&gt;           &lt;dbl&gt;
 1 us     strong agree      420
 2 us     strong disagree   619
 3 us     weak agree        550
 4 eu     neutral           521
 5 in     neutral          1003
 6 eu     neutral           486
 7 in     agree             512
 8 in     disagree          560
 9 us     weak disagree     495
10 in     weak disagree     610</code></pre>
</div>
<p><code>Coercion</code> is an important R concept, and one that we’ll
talk about again. In the meantime, there are some nice things to note
about the output when we print <code>tib</code>. It states that the
variable is a <code>tibble</code> with 10 rows and 3 columns. Underneath
the variable names it tells you what type of data they store: region is
a <code>factor</code> (<fct>), support is an <code>ordered factor</code>
(<ord>) and RT is <code>numeric</code> (<dbl>, short for
“double”)21.</p>
<h2 id="tibbles-are-data-frames">Tibbles are data frames</h2>
<p>Under the hood, tibbles are essentially the same thing as data frames
and are designed to behave the same way. In fact, if we use the
<code>class()</code> function to see what R thinks <code>tib</code>
really is…</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>tib</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
</div>
<p>… it agrees that in addition to being a tibble, tib is also a data
frame! We can check this more directly using the
<code>is.data.frame()</code> function:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>is.data.frame</a></span><span class='op'>(</span><span class='va'>tib</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] TRUE</code></pre>
</div>
<p>That being said, there are one or two differences between tibbles and
pure data frames. For the most part, my impression has been that
whenever they differ, the behaviour of tibbles tends to be more
intuitive. With this in mind, although I’ll tend to use the terms “data
frame” and “tibble” interchangeably, for the rest of these notes I’m
going to work with tibbles like <code>tib</code> rather than pure data
frames like <code>dat</code>.</p>
<h2 id="using-the-operator">Using the $ operator</h2>
<p>At this point our workspace contains a data frame called
<code>dat</code>, a tibble called <code>tib</code>, but no longer
contains the original variables. That’s okay because the tibble (data
frame) is acting as a container that keeps them in a nice tidy
rectangular shape. Conceptually this is very nice, but now we have a
practical question … how do we get information out again? There are two
qualitatively different ways to do this, reflecting two different ways
to think about your data:</p>
<ul>
<li><p>Your data set is a list of variables (…use
<code>$</code>)</p></li>
<li><p>Your data set is a table of values (…use
<code>[ ]</code>)</p></li>
</ul>
<p>Both perspectives are valid, and R allows you to work with your data
both ways.</p>
<p>To start with, let’s think of <code>tib</code> as a list of
variables. This was the perspective we took when constructing
<code>dat</code> in the first place: we took three different vectors
(<code>region</code>, <code>support</code>, <code>RT</code>) and bound
them together into a data frame, which we later coerced into the tibble
<code>tib</code>. From this perspective, what we want is an
<em>operator</em> that will extract one of those variables for us. This
is the role played by <code>$</code>. If I want to refer to the region
variable contained within the tib tibble, I would use this command:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tib</span><span class='op'>$</span><span class='va'>region</span>
</code></pre>
</div>
<pre><code> [1] us us us eu in eu in in us in
Levels: ch eu in us</code></pre>
</div>
<p>As you can see, the output looks exactly the same as it did for the
original variable: <code>tib$region</code> is a vector (an un-ordered
factor in this case), and we can refer to an element of that vector in
the same way we normally would:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tib</span><span class='op'>$</span><span class='va'>region</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1] us
Levels: ch eu in us</code></pre>
</div>
<p>Conceptually, the metaphor here is
<code>dataset$variable[value]</code>. The table below illustrates this
by showing what type of output you get with different commands:</p>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 28%" />
<col style="width: 22%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr class="header">
<th>data frame command</th>
<th>data frame output</th>
<th>tibble command</th>
<th>tibble output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>dat</td>
<td>data frame</td>
<td>tib</td>
<td>tibble</td>
</tr>
<tr class="even">
<td>dat<code>$</code>RT</td>
<td>vector</td>
<td>tib<code>$</code>RT</td>
<td>vector</td>
</tr>
<tr class="odd">
<td>dat<code>$</code>RT[1]</td>
<td>element</td>
<td>tib<code>$</code>RT[1]</td>
<td>element</td>
</tr>
</tbody>
</table>
<p>As you can see, the <code>$</code> operator works the same way for
pure data frames as for tibbles. This is not quite the case for when
using square brackets [ ], as the next section demonstrates…</p>
<h2 id="using-square-brackets">Using square brackets</h2>
<p>The second way to think about a tibble is to treat it as a fancy
table. There is something appealing about this, because it emphasizes
the fact that the data set has a case by variable structure:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tib</span>
</code></pre>
</div>
<pre><code># A tibble: 10 × 3
   region support            RT
   &lt;fct&gt;  &lt;ord&gt;           &lt;dbl&gt;
 1 us     strong agree      420
 2 us     strong disagree   619
 3 us     weak agree        550
 4 eu     neutral           521
 5 in     neutral          1003
 6 eu     neutral           486
 7 in     agree             512
 8 in     disagree          560
 9 us     weak disagree     495
10 in     weak disagree     610</code></pre>
</div>
<p>In this structure each row is a person, and each column is a
variable. The square bracket notation allows you to refer to entries in
the data set by their row and column number (or name). As such, the
reference looks like this:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dataset</span><span class='op'>[</span><span class='va'>row</span>,<span class='va'>column</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<p>R allows you to select multiple rows and columns. For instance if you
set row to be 1:3 then R will return the first three cases. Here is an
example where we select the first three rows and the first two
columns:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tib</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code># A tibble: 3 × 2
  region support        
  &lt;fct&gt;  &lt;ord&gt;          
1 us     strong agree   
2 us     strong disagree
3 us     weak agree     </code></pre>
</div>
<p>If we omit values for the rows (or columns) while keeping the comma
then R will assume you want all rows (or columns). So this returns every
row in <code>tib</code> but only the first two columns:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tib</span><span class='op'>[</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code># A tibble: 10 × 2
   region support        
   &lt;fct&gt;  &lt;ord&gt;          
 1 us     strong agree   
 2 us     strong disagree
 3 us     weak agree     
 4 eu     neutral        
 5 in     neutral        
 6 eu     neutral        
 7 in     agree          
 8 in     disagree       
 9 us     weak disagree  
10 in     weak disagree  </code></pre>
</div>
<p>An important thing to recognize here is that – for tibbles – the
metaphor underpinning the square bracket system is that your data have a
rectangular shape that is imposed by the fact that your variable is a
tibble, and no matter what you do with the square brackets the result
will always remain a tibble. If I select just one row…</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tib</span><span class='op'>[</span><span class='fl'>5</span>,<span class='op'>]</span>
</code></pre>
</div>
<pre><code># A tibble: 1 × 3
  region support    RT
  &lt;fct&gt;  &lt;ord&gt;   &lt;dbl&gt;
1 in     neutral  1003</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tib</span><span class='op'>[</span>,<span class='fl'>3</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code># A tibble: 10 × 1
      RT
   &lt;dbl&gt;
 1   420
 2   619
 3   550
 4   521
 5  1003
 6   486
 7   512
 8   560
 9   495
10   610</code></pre>
</div>
<p>the result is a tibble. Even if I select a single value…</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tib</span><span class='op'>[</span><span class='fl'>5</span>,<span class='fl'>3</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code># A tibble: 1 × 1
     RT
  &lt;dbl&gt;
1  1003</code></pre>
</div>
<p>the result is a tibble. For the square bracket system the rule is
very simple: <em>tibbles stay tibbles</em></p>
<p>Annoyingly, this is not the case for a pure data frame like
<code>dat</code>. For a pure data frame, any time it is possible for R
to treat the result as something else, it does: if I were to use the
same commands for the data frame <code>dat</code>, the results would be
different in some cases. This has caused no end of frustration over the
years because everyone forgets about this particular property of data
frames and stuff breaks. For what it’s worth, if you are working with
pure data frames, here’s a summary of what to expect:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 27%" />
<col style="width: 27%" />
<col style="width: 22%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr class="header">
<th>data frame command</th>
<th>data frame output</th>
<th>tibble command</th>
<th>tibble output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>dat[1,1]</td>
<td>element</td>
<td>tib[1,1]</td>
<td>tibble</td>
</tr>
<tr class="even">
<td>dat[1,]</td>
<td>data frame</td>
<td>tib[1,]</td>
<td>tibble</td>
</tr>
<tr class="odd">
<td>dat[,1]</td>
<td>vector</td>
<td>tib[,1]</td>
<td>tibble</td>
</tr>
<tr class="even">
<td>dat[2:3,]</td>
<td>data frame</td>
<td>tib[2:3,]</td>
<td>tibble</td>
</tr>
<tr class="odd">
<td>dat[,2:3]</td>
<td>data frame</td>
<td>tib[,2:3]</td>
<td>tibble</td>
</tr>
</tbody>
</table>
<p><em>Use tibbles.</em></p>
<h1 id="matrices">Matrices</h1>
<p>Data frames and tibbles are mostly used to describe data that take
the form of a case by variable structure: each row is a case (e.g., a
participant) and each column is a variable (e.g., measurement). Case by
variable structures are fundamentally asymmetric because the rows and
columns have qualitatively different meaning. Two participants who
provide data will always provide data in the same format (if they don’t
then you can’t organize the data this way), but two variables can be
different in many different ways: one column might be numeric, another
is a factor, yet another might contains dates. Many data sets have this
characteristic. Others do not, so it is worth talking about a few other
data structures that arise quite frequently!</p>
<p>Much like a data frame, a matrix is basically a big rectangular table
of data, and there are similarities between the two. However, matrices
treat columns and rows in the same fashion, and as a consequence every
entry in a matrix has to be of the same type (e.g. all numeric, all
character, etc). Let’s create a matrix using the row bind function,
<code>rbind</code>, which combines multiple vectors in a row-wise
fashion:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>row1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>1</span><span class='op'>)</span>          <span class='co'># create data for row 1</span>
<span class='va'>row2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>5</span>, <span class='fl'>6</span>, <span class='fl'>7</span><span class='op'>)</span>          <span class='co'># create data for row 2</span>
<span class='va'>mattie</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='va'>row1</span>, <span class='va'>row2</span><span class='op'>)</span> <span class='co'># row bind them into a matrix</span>
<span class='va'>mattie</span>
</code></pre>
</div>
<pre><code>     [,1] [,2] [,3]
row1    2    3    1
row2    5    6    7</code></pre>
</div>
<p>Notice that when we bound the two vectors together R turned the names
of the original variables into row names. To keep things fair, let’s add
some exciting column names as well:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>mattie</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"col1"</span>, <span class='st'>"col2"</span>, <span class='st'>"col3"</span><span class='op'>)</span>
<span class='va'>mattie</span>
</code></pre>
</div>
<pre><code>     col1 col2 col3
row1    2    3    1
row2    5    6    7</code></pre>
</div>
<h2 id="matrix-indexing">Matrix indexing</h2>
<p>You can use square brackets to subset a matrix in much the same way
that you can for data frames, again specifying a row index and then a
column index. For instance, <code>mattie[2,3]</code> pulls out the entry
in the 2nd row and 3rd column of the matrix (i.e., 7), whereas
<code>mattie[2,]</code> pulls out the entire 2nd row, and
<code>mattie[,3]</code> pulls out the entire 3rd column. However, it’s
worth noting that when you pull out a column, R will print the results
horizontally, not vertically.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mattie</span><span class='op'>[</span><span class='fl'>2</span>,<span class='op'>]</span>
</code></pre>
</div>
<pre><code>col1 col2 col3 
   5    6    7 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mattie</span><span class='op'>[</span>,<span class='fl'>3</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>row1 row2 
   1    7 </code></pre>
</div>
<p>This can be a little confusing for novice users: because it is no
longer a two dimensional object R treats the output as a regular
vector.</p>
<h2 id="matrices-vs-data-frames">Matrices vs data frames</h2>
<p>As mentioned above difference between a data frame and a matrix is
that, at a fundamental level, a matrix really is just one variable: it
just happens that this one variable is formatted into rows and columns.
If you want a matrix of numeric data, every single element in the matrix
must be a number. If you want a matrix of character strings, every
single element in the matrix must be a character string. If you try to
mix data of different types together, then R will either complain or try
to transform the matrix into something unexpected. To give you a sense
of this, let’s do something silly and convert one element of
<code>mattie</code> from the number 5 to the character string
“five”…</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mattie</span><span class='op'>[</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"five"</span> 
<span class='va'>mattie</span>
</code></pre>
</div>
<pre><code>     col1 col2   col3
row1 &quot;2&quot;  &quot;3&quot;    &quot;1&quot; 
row2 &quot;5&quot;  &quot;five&quot; &quot;7&quot; </code></pre>
</div>
<p>Oh no I broke <code>mattie</code> – she’s all text now!</p>
<h2 id="other-ways-to-make-a-matrix">Other ways to make a matrix</h2>
<p>When I created <code>mattie</code> I used the <code>rbind</code>
command. Not surprisingly there is also a <code>cbind</code> command
that combines vectors column-wise rather than row-wise. There is also a
matrix command that you can use to specify a matrix directly:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>12</span>, <span class='co'># the values to include in the matrix</span>
  nrow <span class='op'>=</span> <span class='fl'>3</span>,    <span class='co'># number of rows</span>
  ncol <span class='op'>=</span> <span class='fl'>4</span>     <span class='co'># number of columns</span>
<span class='op'>)</span>
</code></pre>
</div>
<pre><code>     [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    2    5    8   11
[3,]    3    6    9   12</code></pre>
</div>
<p>The result is a <em>3 × 4</em> matrix of the numbers 1 to 12, listed
column-wise. If you need to create a matrix row-wise, you can specify
<code>byrow = TRUE</code> when calling <code>matrix()</code>.</p>
<h1 id="arrays">Arrays</h1>
<p>When doing data analysis, we often have reasons to want to use higher
dimensional tables (e.g., sometimes you need to cross-tabulate three
variables against each other). You can’t do this with matrices, but you
can do it with arrays. An array is just like a matrix, except it can
have more than two dimensions if you need it to. In fact, as far as R is
concerned a matrix is just a special kind of array, in much the same way
that a data frame is a special kind of list. I´ll keep it short here,
but will very briefly show you an example of what a three dimensional
array looks like.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>arr</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/array.html'>array</a></span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>24</span>, 
  dim <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>,<span class='fl'>4</span>,<span class='fl'>2</span><span class='op'>)</span>
  <span class='op'>)</span>
<span class='va'>arr</span>
</code></pre>
</div>
<pre><code>, , 1

     [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    2    5    8   11
[3,]    3    6    9   12

, , 2

     [,1] [,2] [,3] [,4]
[1,]   13   16   19   22
[2,]   14   17   20   23
[3,]   15   18   21   24</code></pre>
</div>
<p>Of course, calling an array <code>arr</code> … no. no.</p>
<p><img
src="https://media.giphy.com/media/3orifb3X9DEIgl7hzG/giphy.gif" /></p>
<h1 id="dates">Dates</h1>
<p>Dates (and time) are very annoying types of data. To a first
approximation we can say that there are 365 days in a year, 24 hours in
a day, 60 minutes in an hour and 60 seconds in a minute, but that’s not
quite correct. The length of the solar day is not exactly 24 hours, and
the length of solar year is not exactly 365 days, so we have a
complicated system of corrections that have to be made to keep the time
and date system working. On top of that, the measurement of time is
usually taken relative to a local time zone, and most (but not all) time
zones have both a standard time and a daylight savings time, though the
date at which the switch occurs is not at all standardized.</p>
<p>So, as a form of data, times and dates are just <em>awful</em> to
work with.</p>
<p>Unfortunately, they’re also important. Sometimes it’s possible to
avoid having to use any complicated system for dealing with times and
dates. Often you just want to know what year something happened in, so
you can just use numeric data: in quite a lot of situations something as
simple as declaring that this_year is 2019, and it works just fine. If
you can get away with that for your application, this is probably the
best thing to do. However, sometimes you really do need to know the
actual date. Or, even worse, the actual time. In this section, I’ll very
briefly introduce you to the basics of how R deals with date and time
data. As with a lot of things in this chapter, I won’t go into details:
the goal here is to show you the basics of what you need to do if you
ever encounter this kind of data in real life.</p>
<p>To start with, let’s talk about the date. As it happens, modern
operating systems are very good at keeping track of the time and date,
and can even handle all those annoying timezone issues and daylight
savings pretty well. So R takes the quite sensible view that it can just
ask the operating system what the date is. We can pull the date using
the <code>Sys.Date</code> function:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>today</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Sys.time.html'>Sys.Date</a></span><span class='op'>(</span><span class='op'>)</span>  <span class='co'># ask the operating system for the date</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>today</span><span class='op'>)</span>         <span class='co'># display the date</span>
</code></pre>
</div>
<pre><code>[1] &quot;2022-06-26&quot;</code></pre>
</div>
<p>Okay, that seems straightforward. But, it does rather look like today
is just a character string, doesn’t it? That would be a problem, because
dates really do have a quasi-numeric character to them, and it would be
nice to be able to do basic addition and subtraction with them. Well,
fear not. If you type in <code>class(today)</code>, R will tell you that
the today variable is a “Date” object. What this means is that, hidden
underneath this text string, R has a numeric representation. What that
means is that you can in fact add and subtract days. For instance, if we
add 1 to today, R will print out the date for tomorrow:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>today</span> <span class='op'>+</span> <span class='fl'>1</span>
</code></pre>
</div>
<pre><code>[1] &quot;2022-06-27&quot;</code></pre>
</div>
<p>Let’s see what happens when we add 365 days:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>today</span> <span class='op'>+</span> <span class='fl'>365</span>
</code></pre>
</div>
<pre><code>[1] &quot;2023-06-26&quot;</code></pre>
</div>
<p>R provides a number of functions for working with dates, but I don’t
want to talk about them in any detail, other than to say that the
<em>lubridate package</em> (part of the tidyverse) makes things a lot
easier than they used to be. Some time (in the not too distant future)
I´ll write something about working with <code>lubridate</code>, EMA data
and doing… stuff…</p>
<h1 id="coercion">Coercion</h1>
<p>Sometimes you want to change the variable class. Sometimes when you
import data from files, it can come to you in the wrong format: numbers
sometimes get imported as text, dates usually get imported as text, and
many other possibilities besides. Sometimes you might want to convert a
data frame to a tibble or vice versa. Changing the variable in this way
is called coercion, and the functions to coerce variables are usually
given names like <code>as.numeric()</code>, <code>as.factor()</code>,
<code>as_tibble()</code> and so on.</p>
<ul>
<li><p>Coercing a data frame to a tibble</p></li>
<li><p>Coercing a character vector to a factor</p></li>
</ul>
<p>There are many other possibilities. A common situation requiring
coercion arises when you have been given a variable x that is supposed
to be representing a number, but the data file that you’ve been given
has encoded it as text.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"15"</span>,<span class='st'>"19"</span><span class='op'>)</span>  <span class='co'># the variable</span>
<span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>           <span class='co'># what class is it?</span>
</code></pre>
</div>
<pre><code>[1] &quot;character&quot;</code></pre>
</div>
<p>Obviously, if I want to do mathematical calculations using x in its
current state R wil get very sad. It thinks x is text and it won’t allow
me to do mathematics with text! To coerce x from “character” to
“numeric”, we use the as.numeric function:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>  <span class='co'># coerce the variable</span>
<span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>            <span class='co'># what class is it?</span>
</code></pre>
</div>
<pre><code>[1] &quot;numeric&quot;</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>+</span> <span class='fl'>1</span>               <span class='co'># hey, addition works!</span>
</code></pre>
</div>
<pre><code>[1] 16 20</code></pre>
</div>
<p>Not surprisingly, we can also convert it back again if we need to.
The function that we use to do this is the <code>as.character</code>
function:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>   <span class='co'># coerce back to text</span>
<span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>               <span class='co'># check the class</span>
</code></pre>
</div>
<pre><code>[1] &quot;character&quot;</code></pre>
</div>
<p>There are of course some limitations: you can’t coerce “hello world”
into a number because there isn’t a number that corresponds to it. If
you try, R metaphorically shrugs its shoulders and declares it to be
missing:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"51"</span>, <span class='st'>"hello world"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Warning: NAs introduced by coercion</code></pre>
<pre><code>[1] 51 NA</code></pre>
</div>
<p>Makes sense I suppose!</p>
<p>Another case worth talking about is how R handles coercion with
logical variables. Coercing text to logical data using
<code>as.logical()</code> is mostly intuitive. The strings “T”, “TRUE”,
“True” and “true” all convert to TRUE, whereas “F”, “FALSE”, “False”,
and “false” all become FALSE.</p>
<p>All other strings convert to NA. When coercing from logical to test
using <code>as.character</code>, TRUE converts to “TRUE” and FALSE
converts to “FALSE”.</p>
<p>Converting numeric values to logical data – again using
<code>as.logical</code> – is similarly straightforward. Following the
standard convention in the study of Boolean logic <code>0</code> coerces
to FALSE. Everything else is TRUE. When coercing logical to numeric,
FALSE converts to 0 and TRUE converts to 1.</p>
<div class="sourceCode" id="cb58"><pre
class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
